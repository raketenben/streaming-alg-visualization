var ka=Object.defineProperty;var Da=(t,a,e)=>a in t?ka(t,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[a]=e;var P=(t,a,e)=>Da(t,typeof a!="symbol"?a+"":a,e);import{a as N,t as T}from"../chunks/CJyYlKNc.js";import{h as ha,i as ra,t as j,j as na,k as i,n,o as s,q as r,D as _a,C as ea,u as Na,l as x,m as A,ap as Aa}from"../chunks/CdacCZTE.js";import{b as E,a as ma,p as R}from"../chunks/BtJpnK8n.js";import{s as M,e as Ta,d as za}from"../chunks/Cp7KXPpH.js";import{i as J}from"../chunks/BqY8ZO7V.js";import{o as fa}from"../chunks/03ghFZSj.js";import{C as sa,b as K,r as L,P as Ca}from"../chunks/CpxDJ7_Z.js";function ba(t){var a,e,l="";if(typeof t=="string"||typeof t=="number")l+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(a=0;a<o;a++)t[a]&&(e=ba(t[a]))&&(l&&(l+=" "),l+=e)}else for(e in t)t[e]&&(l&&(l+=" "),l+=e);return l}function Fa(){for(var t,a,e=0,l="",o=arguments.length;e<o;e++)(t=arguments[e])&&(a=ba(t))&&(l&&(l+=" "),l+=a);return l}function Ia(t){return typeof t=="object"?Fa(t):t??""}function Sa(t,a,e){var l=t.__className,o=Pa(a,e);ha&&t.className===o?t.__className=o:(l!==o||ha&&t.className!==o)&&(t.className=o,t.__className=o)}function Pa(t,a){return(t??"")+(" "+a)}var ja=T('<h2><span>Genauer Wert: <span class="important"> </span></span></h2>'),Ga=T('<h2><span>Geschätzter Wert: <span class="important"> </span></span></h2>'),Wa=T('<h2><span>Abweichung Absolut: <span class="important"> </span></span></h2> <h2><span>Abweichung Prozentual: <span class="important"> </span></span></h2>',1),qa=T("<span>-</span>"),Ba=T('<div class="panel"><h1>F2 Vergleich</h1> <!> <!> <!> <details><summary>Graph</summary> <canvas></canvas></details></div>');function Va(t,a){ra(a,!0);var e;let l=[],o=ea(()=>a.accurate_f2-a.predicted_f2),h=ea(()=>i(o)/a.accurate_f2*100),f=ea(()=>isNaN(i(h))||i(h)===void 0||i(h)===null);fa(()=>{let d=new sa(e,{type:"line",data:{labels:Array.from({length:100},(_,m)=>m+1),datasets:[{data:[{x:0,y:0}],label:"Abweichung Prozentual"}]},options:{animation:!1,scales:{x:{type:"linear",position:"bottom",ticks:{display:!0},grid:{display:!1,drawTicks:!1}},y:{type:"linear",suggestedMax:1,suggestedMin:-1}},elements:{point:{radius:0}}}}),p=new Date().getTime()/1e3;function v(){if(i(h)!==void 0&&isNaN(i(h))===!1&&i(f)===!1){let m=new Date().getTime()/1e3-p;l.push({x:m,y:i(h)}),l=l.filter(I=>I.x>m-10),d.data.datasets[0].data=l,d.update()}}setInterval(()=>{v()},100)});var b=Ba(),g=n(s(b),2);{var u=d=>{var p=ja(),v=s(p),_=n(s(v)),m=s(_,!0);r(_),r(v),r(p),j(()=>M(m,a.accurate_f2)),N(d,p)};J(g,d=>{a.accurate_f2&&d(u)})}var y=n(g,2);{var w=d=>{var p=Ga(),v=s(p),_=n(s(v)),m=s(_,!0);r(_),r(v),r(p),j(()=>M(m,a.predicted_f2)),N(d,p)};J(y,d=>{a.predicted_f2&&d(w)})}var k=n(y,2);{var G=d=>{var p=Wa(),v=_a(p),_=s(v),m=n(s(_)),I=s(m,!0);r(m),r(_),r(v);var q=n(v,2),U=s(q),B=n(s(U)),H=s(B);r(B),r(U),r(q),j(O=>{M(I,i(o)),M(H,`${O??""}%`)},[()=>i(h).toFixed(2)]),N(d,p)},z=d=>{var p=qa();N(d,p)};J(k,d=>{i(o)!==void 0&&isNaN(i(h))===!1?d(G):d(z,!1)})}var W=n(k,2),C=n(s(W),2);E(C,d=>e=d,()=>e),r(W),r(b),j(()=>Sa(C,Ia(i(f)?"hidden":""),"svelte-2e2o1w")),N(t,b),na()}var Ea=T('<div class="panel"><h1>Datenquelle</h1> <h2> </h2> <div class="row svelte-g771hu"><label>Datenpunkte pro Sekunde:</label> <input type="range" min="1" max="1000" class="svelte-g771hu"> <span> </span></div> <div class="row svelte-g771hu"><button>Clear Data</button></div> <details><summary>Datenstrom</summary> <div><canvas></canvas></div></details> <details><summary>Verteilung</summary> <div><canvas></canvas></div></details> <details><summary>Bias</summary> <div class="row svelte-g771hu"><label>Nach:</label> <input type="range" min="0" max="1" step="0.01" class="svelte-g771hu"> <span> </span></div> <div class="row svelte-g771hu"><label>Wie stark:</label> <input type="range" min="0" max="0.8" step="0.01" class="svelte-g771hu"> <span> </span></div></details> <details><summary>Berechnete F2</summary> <h2><span>F2: <span class="important"> </span></span></h2></details></div>');function Ra(t,a){ra(a,!0);let e=ma(a,"prediction",15);var l,o;let h=null,f=A(1),b=A(0),g=A(0),u=[],y=new Array(100).fill(0),w=A(.5),k=A(0);function G(c=0,D=0){let F=Math.floor(Math.random()*100),aa=c*100,ta=F*(1-D)+aa*D;return Math.floor(ta)}function z(){u=[],y=new Array(100).fill(0)}fa(()=>{let c=new sa(l,{type:"bar",data:{datasets:[{label:"Random Data",data:[{x:0,y:0}]}]},options:{animation:!1,scales:{x:{type:"linear",position:"bottom",ticks:{display:!0},grid:{display:!1,drawTicks:!1}}}}}),D=new sa(o,{type:"bar",data:{labels:Array.from({length:100},(V,S)=>S+1),datasets:[{data:y,label:"Distribution"}]},options:{animation:!1,scales:{x:{type:"linear",position:"bottom",ticks:{display:!0},grid:{display:!1,drawTicks:!1}}}}}),F=new Date().getTime()/1e3;function aa(){let V=new Date().getTime()/1e3-F,S=G(i(w),i(k));x(b,R(S)),a.data(i(b)),y[S]+=1,x(g,R(W(y))),e(i(g)),u.push({x:V,y:S}),u=u.filter(wa=>wa.x>V-5)}function ta(){let V=new Date().getTime()/1e3-F;c.data.datasets[0].data=u;let S=5;c.options.scales.x.min=Math.max(V-S,0),c.options.scales.x.max=Math.max(V,0),c.options.scales.y.min=0,c.options.scales.y.max=100,c.update(),D.data.datasets[0].data=y,D.update()}Na(()=>{h!=null&&clearInterval(h),h=setInterval(aa,1e3/i(f))}),setInterval(ta,100)});function W(c){let D=0;for(let F=0;F<c.length;F++)D+=Math.pow(c[F],2);return D}var C=Ea(),d=n(s(C),2),p=s(d,!0);r(d);var v=n(d,2),_=n(s(v),2);L(_);var m=n(_,2),I=s(m);r(m),r(v);var q=n(v,2),U=s(q);r(q);var B=n(q,2),H=n(s(B),2),O=s(H);E(O,c=>l=c,()=>l),r(H),r(B);var Q=n(B,2),ia=n(s(Q),2),ga=s(ia);E(ga,c=>o=c,()=>o),r(ia),r(Q);var X=n(Q,2),Y=n(s(X),2),Z=n(s(Y),2);L(Z);var la=n(Z,2),ya=s(la,!0);r(la),r(Y);var oa=n(Y,2),$=n(s(oa),2);L($);var pa=n($,2),xa=s(pa);r(pa),r(oa),r(X);var da=n(X,2),va=n(s(da),2),ca=s(va),ua=n(s(ca)),Ma=s(ua,!0);return r(ua),r(ca),r(va),r(da),r(C),j((c,D)=>{M(p,i(b)),M(I,`${i(f)??""}/s`),M(ya,c),M(xa,`${D??""}%`),M(Ma,e())},[()=>Math.floor(i(w)*100),()=>Math.round(i(k)*100)]),K(_,()=>i(f),c=>x(f,c)),Ta("click",U,z),K(Z,()=>i(w),c=>x(w,c)),K($,()=>i(k),c=>x(k,c)),N(t,C),na({clear_data:z})}class Ua{constructor(){P(this,"p3");P(this,"p2");P(this,"p1");P(this,"p0");P(this,"bp");P(this,"counter",0)}async init(){this.bp=1741,this.p3=Math.floor(Math.random()*this.bp),this.p2=Math.floor(Math.random()*this.bp),this.p1=Math.floor(Math.random()*this.bp),this.p0=Math.floor(Math.random()*this.bp)}hash(a){return(this.p3*Math.pow(a,3)+this.p2*Math.pow(a,2)+this.p1*a+this.p0)%this.bp%2==0?1:-1}predict(a){let e=this.hash(a);return this.counter+=e,Math.pow(this.counter,2)}clear(){this.p3=Math.floor(Math.random()*this.bp),this.p2=Math.floor(Math.random()*this.bp),this.p1=Math.floor(Math.random()*this.bp),this.p0=Math.floor(Math.random()*this.bp),this.counter=0}}var Ha=T('<h2><span>Schätzung F2: <span class="important"> </span></span></h2>'),Ja=T('<div class="panel"><h1>F2 Schätzer</h1> <!> <br> <div class="panel"><input type="number" class="svelte-1vapt35"> <button class="svelte-1vapt35">Update</button> <br> <div class="status svelte-1vapt35"><span> </span> <br> <!></div></div></div>');function Ka(t,a){ra(a,!0);let e=A(1),l=ma(a,"prediction",15),o=[],h=A("");async function f(){if(x(h,`Initalisiere ${i(e)} Schätzer...`),await Aa(),i(e)>o.length)for(let p=o.length;p<i(e);p++){let v=new Ua;await v.init(),o.push(v)}else o=o.slice(0,i(e));x(h,`Initialisierung von ${i(e)} Schätzern abgeschlossen.`);for(const p of o)p.clear();a.updated()}const b=p=>{let v=0;for(const _ of o)v+=_.predict(p);l(Math.round(v/o.length))};var g=Ja(),u=n(s(g),2);Ca(u,{get estimator_count(){return i(e)},set estimator_count(p){x(e,R(p))}});var y=n(u,4),w=s(y);L(w);var k=n(w,2);k.__click=f;var G=n(k,4),z=s(G),W=s(z,!0);r(z);var C=n(z,4);{var d=p=>{var v=Ha(),_=s(v),m=n(s(_)),I=s(m,!0);r(m),r(_),r(v),j(()=>M(I,l())),N(p,v)};J(C,p=>{l()&&p(d)})}return r(G),r(y),r(g),j(()=>M(W,i(h))),K(w,()=>i(e),p=>x(e,p)),N(t,g),na({handle_data:b})}za(["click"]);var La=T("<!> <!> <!>",1);function et(t){let a,e,l=A(0),o=A(0);var h=La(),f=_a(h);E(Ra(f,{data:u=>{a.handle_data(u)},get prediction(){return i(l)},set prediction(u){x(l,R(u))}}),u=>e=u,()=>e);var b=n(f,2);E(Ka(b,{updated:()=>{e.clear_data()},get prediction(){return i(o)},set prediction(u){x(o,R(u))}}),u=>a=u,()=>a);var g=n(b,2);Va(g,{get accurate_f2(){return i(l)},get predicted_f2(){return i(o)}}),N(t,h)}export{et as component};
