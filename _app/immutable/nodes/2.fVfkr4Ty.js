var wa=Object.defineProperty;var xa=(d,n,i)=>n in d?wa(d,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[n]=i;var G=(d,n,i)=>xa(d,typeof n!="symbol"?n+"":n,i);import{a as F,t as P}from"../chunks/B-bCnNXR.js";import{g as ca,t as R,i as ua,u as Ma,j as r,k as y,n as s,m as a,o as t,l as I,ar as ka,W as va}from"../chunks/hnRg4GeL.js";import{e as Da,s as w,d as za}from"../chunks/DoJvZeW-.js";import{i as N}from"../chunks/DDekZsOI.js";import{a as ha,b as K,p as O}from"../chunks/CRW5mszk.js";import{b as H,C as da,r as J,P as Aa}from"../chunks/DMBwJqAf.js";import{o as Fa}from"../chunks/B-l8ibbC.js";var Ia=P('<div class="panel"><h1>Datenquelle</h1> <h2> </h2> <div class="row svelte-g771hu"><label>Datenpunkte pro Sekunde:</label> <input type="range" min="1" max="1000" class="svelte-g771hu"> <span> </span></div> <div class="row svelte-g771hu"><button>Clear Data</button></div> <details><summary>Datenstrom</summary> <div><canvas></canvas></div></details> <details><summary>Verteilung</summary> <div><canvas></canvas></div></details> <details><summary>Bias</summary> <div class="row svelte-g771hu"><label>Nach:</label> <input type="range" min="0" max="1" step="0.01" class="svelte-g771hu"> <span> </span></div> <div class="row svelte-g771hu"><label>Wie stark:</label> <input type="range" min="0" max="0.8" step="0.01" class="svelte-g771hu"> <span> </span></div></details> <details><summary>Berechnete F2</summary> <h2><span>F2: <span class="important"> </span></span></h2></details></div>');function Pa(d,n){ca(n,!0);let i=ha(n,"prediction",15);var m,p;let _=null,M=I(1),k=I(0),D=I(0),f=[],b=new Array(100).fill(0),g=I(.5),z=I(0);function C(o=0,x=0){let j=Math.floor(Math.random()*100),$=o*100,aa=j*(1-x)+$*x;return Math.floor(aa)}function S(){f=[],b=new Array(100).fill(0)}Fa(()=>{let o=new da(m,{type:"bar",data:{datasets:[{label:"Random Data",data:[]}]},options:{animation:!1,scales:{x:{type:"linear",position:"bottom",ticks:{display:!0},grid:{display:!1,drawTicks:!1}}}}}),x=new da(p,{type:"bar",data:{labels:Array.from({length:100},(q,B)=>B+1),datasets:[{data:b,label:"Distribution"}]},options:{animation:!1,scales:{x:{type:"linear",position:"bottom",ticks:{display:!0},grid:{display:!1,drawTicks:!1}}}}}),j=new Date().getTime()/1e3;function $(){let q=new Date().getTime()/1e3-j,B=C(r(g),r(z));y(k,O(B)),n.data(r(k)),b[B]+=1,y(D,O(V(b))),i(r(D)),f.push({x:q,y:B}),f=f.filter(ya=>ya.x>q-5)}function aa(){let q=new Date().getTime()/1e3-j;o.data.datasets[0].data=f;let B=5;o.options.scales.x.min=Math.max(q-B,0),o.options.scales.x.max=Math.max(q,0),o.options.scales.y.min=0,o.options.scales.y.max=100,o.update(),x.data.datasets[0].data=b,x.update()}Ma(()=>{_!=null&&clearInterval(_),_=setInterval($,1e3/r(M))}),setInterval(aa,100)});function V(o){let x=0;for(let j=0;j<o.length;j++)x+=Math.pow(o[j],2);return x}var T=Ia(),W=s(a(T),2),v=a(W,!0);t(W);var c=s(W,2),e=s(a(c),2);J(e);var l=s(e,2),u=a(l);t(l),t(c);var h=s(c,2),A=a(h);t(h);var E=s(h,2),ta=s(a(E),2),ma=a(ta);K(ma,o=>m=o,()=>m),t(ta),t(E);var L=s(E,2),ea=s(a(L),2),_a=a(ea);K(_a,o=>p=o,()=>p),t(ea),t(L);var Q=s(L,2),X=s(a(Q),2),Y=s(a(X),2);J(Y);var sa=s(Y,2),fa=a(sa,!0);t(sa),t(X);var ra=s(X,2),Z=s(a(ra),2);J(Z);var na=s(Z,2),ba=a(na);t(na),t(ra),t(Q);var ia=s(Q,2),la=s(a(ia),2),oa=a(la),pa=s(a(oa)),ga=a(pa,!0);return t(pa),t(oa),t(la),t(ia),t(T),R((o,x)=>{w(v,r(k)),w(u,`${r(M)??""}/s`),w(fa,o),w(ba,`${x??""}%`),w(ga,i())},[()=>Math.floor(r(g)*100),()=>Math.round(r(z)*100)]),H(e,()=>r(M),o=>y(M,o)),Da("click",A,S),H(Y,()=>r(g),o=>y(g,o)),H(Z,()=>r(z),o=>y(z,o)),F(d,T),ua({clear_data:S})}let U=null;async function Sa(){let n=await(await fetch("primes.json")).json();return Object.values(n)}async function ja(){U===null&&(U=await Sa());const d=Math.floor(Math.random()*U.length);return U[d]}class Ca{constructor(){G(this,"p3");G(this,"p2");G(this,"p1");G(this,"p0");G(this,"bp");G(this,"counter",0)}async init(){this.bp=await ja(),this.p3=Math.floor(Math.random()*this.bp),this.p2=Math.floor(Math.random()*this.bp),this.p1=Math.floor(Math.random()*this.bp),this.p0=Math.floor(Math.random()*this.bp)}hash(n){return(this.p3*Math.pow(n,3)+this.p2*Math.pow(n,2)+this.p1*n+this.p0)%this.bp%2==0?1:-1}predict(n){let i=this.hash(n);return this.counter+=i,Math.pow(this.counter,2)}clear(){this.counter=0}}var Ta=P('<h2><span>Schätzung F2: <span class="important"> </span></span></h2>'),Wa=P('<div class="panel"><h1>F2 Schätzer</h1> <!> <br> <div class="panel"><input type="number" class="svelte-1vapt35"> <button class="svelte-1vapt35">Update</button> <br> <div class="status svelte-1vapt35"><span> </span> <br> <!></div></div></div>');function Ba(d,n){ca(n,!0);let i=I(1),m=ha(n,"prediction",15),p=[],_=I("");async function M(){if(y(_,`Initalisiere ${r(i)} Schätzer...`),await ka(),r(i)>p.length)for(let v=p.length;v<r(i);v++){let c=new Ca;await c.init(),p.push(c)}else p=p.slice(0,r(i));y(_,`Initialisierung von ${r(i)} Schätzern abgeschlossen.`);for(const v of p)v.clear();n.updated()}const k=v=>{let c=0;for(const e of p)c+=e.predict(v);m(Math.round(c/p.length))};var D=Wa(),f=s(a(D),2);Aa(f,{get estimator_count(){return r(i)},set estimator_count(v){y(i,O(v))}});var b=s(f,4),g=a(b);J(g);var z=s(g,2);z.__click=M;var C=s(z,4),S=a(C),V=a(S,!0);t(S);var T=s(S,4);{var W=v=>{var c=Ta(),e=a(c),l=s(a(e)),u=a(l,!0);t(l),t(e),t(c),R(()=>w(u,m())),F(v,c)};N(T,v=>{m()&&v(W)})}return t(C),t(b),t(D),R(()=>w(V,r(_))),H(g,()=>r(i),v=>y(i,v)),F(d,D),ua({handle_data:k})}za(["click"]);var Ga=P('<h2><span>Genauer Wert: <span class="important"> </span></span></h2>'),Ra=P('<h2><span>Geschätzter Wert: <span class="important"> </span></span></h2>'),Va=P('<h2><span>Abweichung Absolute: <span class="important"> </span></span></h2>'),qa=P('<h2><span>Abweichung Prozentual: <span class="important"> </span></span></h2>'),Ea=P("<span>-</span>"),Na=P('<div class="layout svelte-1ydwtov"><!> <!> <div class="panel"><h1>F2 Vergleich</h1> <!> <!> <!> <!></div></div>');function Ya(d){let n,i,m=I(0),p=I(0),_=va(()=>Math.abs(r(m)-r(p))),M=va(()=>r(_)/r(m)*100);var k=Na(),D=a(k);K(Pa(D,{data:e=>{n.handle_data(e)},get prediction(){return r(m)},set prediction(e){y(m,O(e))}}),e=>i=e,()=>i);var f=s(D,2);K(Ba(f,{updated:()=>{i.clear_data()},get prediction(){return r(p)},set prediction(e){y(p,O(e))}}),e=>n=e,()=>n);var b=s(f,2),g=s(a(b),2);{var z=e=>{var l=Ga(),u=a(l),h=s(a(u)),A=a(h,!0);t(h),t(u),t(l),R(()=>w(A,r(m))),F(e,l)};N(g,e=>{r(m)&&e(z)})}var C=s(g,2);{var S=e=>{var l=Ra(),u=a(l),h=s(a(u)),A=a(h,!0);t(h),t(u),t(l),R(()=>w(A,r(p))),F(e,l)};N(C,e=>{r(p)&&e(S)})}var V=s(C,2);{var T=e=>{var l=Va(),u=a(l),h=s(a(u)),A=a(h,!0);t(h),t(u),t(l),R(()=>w(A,r(_))),F(e,l)};N(V,e=>{r(_)&&e(T)})}var W=s(V,2);{var v=e=>{var l=qa(),u=a(l),h=s(a(u)),A=a(h);t(h),t(u),t(l),R(E=>w(A,`${E??""}%`),[()=>r(M).toFixed(2)]),F(e,l)},c=e=>{var l=Ea();F(e,l)};N(W,e=>{r(M)?e(v):e(c,!1)})}t(b),t(k),F(d,k)}export{Ya as component};
